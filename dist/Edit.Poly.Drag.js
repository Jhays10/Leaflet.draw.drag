"use strict";if(L.Browser.svg){L.Path.include({_resetTransform:function(){this._container.setAttributeNS(null,"transform","")},_applyTransform:function(t){this._container.setAttributeNS(null,"transform","matrix("+t.join(" ")+")")}})}else{L.Path.include({_resetTransform:function(){if(this._skew){this._skew.on=false;this._container.removeChild(this._skew);this._skew=null}},_applyTransform:function(t){var i=this._skew;if(!i){i=this._createElement("skew");this._container.appendChild(i);i.style.behavior="url(#default#VML)";this._skew=i}var a=t[0].toFixed(8)+" "+t[1].toFixed(8)+" "+t[2].toFixed(8)+" "+t[3].toFixed(8)+" 0 0";var r=Math.floor(t[4]).toFixed()+", "+Math.floor(t[5]).toFixed()+"";var e=this._container.style;var s=parseFloat(e.left);var n=parseFloat(e.top);var o=parseFloat(e.width);var h=parseFloat(e.height);if(isNaN(s))s=0;if(isNaN(n))n=0;if(isNaN(o)||!o)o=1;if(isNaN(h)||!h)h=1;var _=(-s/o-.5).toFixed(8)+" "+(-n/h-.5).toFixed(8);i.on="f";i.matrix=a;i.origin=_;i.offset=r;i.on=true}})}"use strict";L.Handler.PathDrag=L.Handler.extend({initialize:function(t){this._path=t;this._matrix=null;this._startPoint=null;this._dragStartPoint=null},addHooks:function(){this._path.on("mousedown",this._onDragStart,this);L.DomUtil.addClass(this._path._container,"leaflet-path-draggable")},removeHooks:function(){this._path.off("mousedown",this._onDragStart,this);L.DomUtil.removeClass(this._path._container,"leaflet-path-draggable")},moved:function(){return this._path._dragMoved},_onDragStart:function(t){this._startPoint=L.point(t.containerPoint);this._dragStartPoint=L.point(t.containerPoint.x,t.containerPoint.y);this._matrix=[1,0,0,1,0,0];this._path._map.on("mousemove",this._onDrag,this).on("mouseup",this._onDragEnd,this);this._path._dragMoved=false},_onDrag:function(t){var i=t.containerPoint.x;var a=t.containerPoint.y;var r=i-this._startPoint.x;var e=a-this._startPoint.y;if(!this._path._dragMoved&&(r||e)){this._path._dragMoved=true;this._path.fire("dragstart")}this._matrix[4]+=r;this._matrix[5]+=e;this._startPoint.x=i;this._startPoint.y=a;this._path._applyTransform(this._matrix);this._path.fire("drag");L.DomEvent.stop(t.originalEvent)},_onDragEnd:function(t){this._path._resetTransform();this._transformPoints();this._path._map.off("mousemove",this._onDrag,this).off("mouseup",this._onDragEnd,this);this._path.fire("dragend",{distance:Math.sqrt(L.LineUtil._sqDist(this._dragStartPoint,t.containerPoint))});this._matrix=null;this._startPoint=null;this._dragStartPoint=null},_transformPoints:function(t){var t=this._matrix;var i=t[0];var a=t[1];var r=t[2];var e=t[3];var s=t[4];var n=t[5];var o=this._path;var h=this._path._map;var _=[];var g,l,d,p;function f(t){var o=t.x;var h=t.y;t.x=i*o+r*h+s;t.y=a*o+e*h+n;return t}if(o._originalPoints){for(g=0,d=o._originalPoints.length;g<d;g++){o._latlngs[g]=h.layerPointToLatLng(f(o._originalPoints[g]))}}else if(o._point){o._latlng=h.layerPointToLatLng(f(o._point))}if(o._holes){for(g=0,d=o._holes.length;g<d;g++){for(l=0,p=o._holes[g].length;l<p;l++){o._holes[g][l]=h.layerPointToLatLng(f(o._holePoints[g][l]))}}}o._updatePath()}});(function(){var t=L.Path.prototype._initEvents;L.Path.prototype._initEvents=function(){t.call(this);if(this.options.draggable){if(this.dragging){this.dragging.enable()}else{this.dragging=new L.Handler.PathDrag(this);this.dragging.enable()}}else if(this.dragging){this.dragging.disable()}}})();"use strict";L.Edit.Poly.include({addHooks:function(){if(this._poly._map){if(!this._markerGroup){this._enableDragging();this._initMarkers()}this._poly._map.addLayer(this._markerGroup)}},removeHooks:function(){if(this._poly._map){this._poly._map.removeLayer(this._markerGroup);this._disableDragging();delete this._markerGroup;delete this._markers}},_enableDragging:function(){if(!this._poly.dragging){this._poly.dragging=new L.Handler.PathDrag(this._poly)}this._poly.dragging.enable();this._poly.on("dragstart",this._onStartDragFeature,this).on("dragend",this._onStopDragFeature,this)},_disableDragging:function(){this._poly.dragging.disable();this._poly.off("dragstart",this._onStartDragFeature,this).off("dragend",this._onStopDragFeature,this)},_onStartDragFeature:function(t){this._poly._map.removeLayer(this._markerGroup)},_onStopDragFeature:function(t){var i=this._poly;for(var a=0,r=i._latlngs.length;a<r;a++){var e=this._markers[a];e.setLatLng(i._latlngs[a]);e._origLatLng=i._latlngs[a];if(e._middleLeft){e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e))}if(e._middleRight){e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next))}}this._poly._map.addLayer(this._markerGroup);this._fireEdit()}});"use strict";L.Edit.Circle.include({addHooks:function(){if(this._shape._map){this._map=this._shape._map;if(!this._markerGroup){this._enableDragging();this._initMarkers()}this._shape._map.addLayer(this._markerGroup)}},removeHooks:function(){if(this._shape._map){for(var t=0,i=this._resizeMarkers.length;t<i;t++){this._unbindMarker(this._resizeMarkers[t])}this._disableDragging();this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);delete this._markerGroup}this._map=null},_createMoveMarker:function(){},_resize:function(t){var i=this._shape.getLatLng();var a=i.distanceTo(t);this._shape.setRadius(a)},_enableDragging:function(){if(!this._shape.dragging){this._shape.dragging=new L.Handler.PathDrag(this._shape)}this._shape.dragging.enable();this._shape.on("dragstart",this._onStartDragFeature,this).on("dragend",this._onStopDragFeature,this)},_disableDragging:function(){this._shape.dragging.disable();this._shape.off("dragstart",this._onStartDragFeature,this).off("dragend",this._onStopDragFeature,this)},_onStartDragFeature:function(){this._shape._map.removeLayer(this._markerGroup)},_onStopDragFeature:function(){var t=this._shape.getLatLng();this._resizeMarkers[0].setLatLng(this._getResizeMarkerPoint(t));this._shape._map.addLayer(this._markerGroup);this._fireEdit()}});"use strict";L.Edit.Rectangle.include({addHooks:function(){if(this._shape._map){if(!this._markerGroup){this._enableDragging();this._initMarkers()}this._shape._map.addLayer(this._markerGroup)}},removeHooks:function(){if(this._shape._map){this._shape._map.removeLayer(this._markerGroup);this._disableDragging();delete this._markerGroup;delete this._markers}},_createMoveMarker:function(){},_resize:function(t){this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner))},_onMarkerDragEnd:function(t){this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_enableDragging:function(){if(!this._shape.dragging){this._shape.dragging=new L.Handler.PathDrag(this._shape)}this._shape.dragging.enable();this._shape.on("dragstart",this._onStartDragFeature,this).on("dragend",this._onStopDragFeature,this)},_disableDragging:function(){this._shape.dragging.disable();this._shape.off("dragstart",this._onStartDragFeature,this).off("dragend",this._onStopDragFeature,this)},_onStartDragFeature:function(){this._shape._map.removeLayer(this._markerGroup)},_onStopDragFeature:function(){var t=this._shape;for(var i=0,a=t._latlngs.length;i<a;i++){var r=this._resizeMarkers[i];r.setLatLng(t._latlngs[i]);r._origLatLng=t._latlngs[i];if(r._middleLeft){r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r))}if(r._middleRight){r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next))}}this._shape._map.addLayer(this._markerGroup);this._fireEdit()}});